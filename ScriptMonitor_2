// ==UserScript==
// @name         Ultimate Restriction Script (Full Control)
// @namespace    http://tampermonkey.net/
// @version      5.0
// @description  Enforces extreme restrictions, self-monitors, prevents tampering, limits text input freedom, and visually reinforces control.
// @author       Miss
// @match        *://*/*
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_addStyle
// @run-at       document-start
// ==/UserScript==

(function() {
    'use strict';

    // 1. Prevent Developer Tools Access
    document.addEventListener("keydown", (e) => {
        if ((e.ctrlKey && e.shiftKey && e.keyCode === 73) || e.keyCode === 123) {
            e.preventDefault();
            alert("Developer Tools access is disabled.");
        }
    });

    // 2. Disable Console Access Completely
    console = {
        log: function() {},
        warn: function() {},
        error: function() {},
        info: function() {},
        debug: function() {},
        clear: function() {},
    };

    // 3. Detect and Block DevTools Opening
    setInterval(() => {
        const devtools = /./;
        devtools.toString = function() {
            this.opened = true;
        };
        console.log("%c", devtools);
        if (devtools.opened) {
            alert("Developer Tools access is restricted!");
            location.reload();
        }
    }, 1000);

    // 4. Prevent Access to Tampermonkey
    setInterval(() => {
        if (window.location.href.includes("chrome-extension://")) {
            alert("Access to Tampermonkey is blocked.");
            window.close();
        }
    }, 2000);

    // 5. Enforce Input Restrictions (No Freedom to Type)
    document.querySelectorAll('input, textarea').forEach(el => {
        el.disabled = true;
        el.style.backgroundColor = 'gray';
    });

    // 6. Visual Indicators (Reinforce Submissiveness)
    GM_addStyle(`
        body {
            background-color: pink !important;
            color: white !important;
        }
        #top-banner {
            content: "Submission Enforced";
            font-size: 20px;
            color: red;
            position: fixed;
            top: 0;
            width: 100%;
            text-align: center;
            z-index: 1000;
            background-color: black;
        }
    `);

    // 7. Script Monitoring and Reinstallation (Self-Enforcing Logic)
    function monitorScript(monitoredScriptURL, monitoredKey) {
        setInterval(() => {
            const isActive = GM_getValue(monitoredKey, false);
            if (!isActive) {
                reinstallScript(monitoredScriptURL, monitoredKey);
            }
        }, 10000);
    }

    function reinstallScript(url, key) {
        GM_xmlhttpRequest({
            method: "GET",
            url: url,
            onload: function(response) {
                try {
                    eval(response.responseText);
                    GM_setValue(key, true);
                    GM_notification({
                        title: "Script Reinstalled",
                        text: `${key} has been reinstalled.`,
                        timeout: 3000
                    });
                } catch (e) {
                    console.error(`Failed to reinstall ${key}:`, e);
                }
            },
            onerror: function(error) {
                console.error(`Failed to fetch ${url}:`, error);
            }
        });
    }

    // 8. Periodic Checks for Script Integrity
    monitorScript("https://github.com/gladostalker/Script-Monitor/blob/main/ScriptMonitor_1", "script1_active");
    monitorScript("https://github.com/gladostalker/Script-Monitor/blob/main/ScriptMonitor_2", "script2_active");

    // 9. Prevent Copying or Editing of Script
    document.body.addEventListener('copy', function(e) {
        e.preventDefault();
        alert("Copying content is blocked.");
    });

    // 10. Prevent Disabling or Tampering with Scripts
    setInterval(() => {
        if (typeof GM_setValue === 'undefined') {
            alert("Tampering with the script is detected!");
            location.reload();
        }
    }, 10000);

    console.log("Ultimate Restriction Script (Full Control) is active!");
})();
